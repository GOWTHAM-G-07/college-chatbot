<div id="chat"></div>

<form id="chatForm">
  <input id="q">
  <button>Send</button>
</form>

<script>
const user = JSON.parse(localStorage.getItem("user"));

chatForm.onsubmit = async e => {
  e.preventDefault();
  const res = await fetch("http://127.0.0.1:8000/search",{
    method:"POST",
    headers:{"Content-Type":"application/x-www-form-urlencoded"},
    body:new URLSearchParams({query:q.value})
  });
  const data = await res.json();
  chat.innerHTML += `<b>You:</b> ${q.value}<br>`;
  data.forEach(d=>{
    chat.innerHTML += `<b>${d.filename}</b><br>${d.content}<hr>`;
  });
};
</script>
